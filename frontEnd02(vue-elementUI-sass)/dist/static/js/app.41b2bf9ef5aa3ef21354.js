webpackJsonp([1],{"09yM":function(e,t){},"4Zm/":function(e,t){},"89bJ":function(e,t){},"9uLG":function(e,t){},ACW1:function(e,t){},BQno:function(e,t){},LC6X:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("ZLEe"),a=s.n(n),r=s("kV13"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rootWrap",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=s("C7Lr")({name:"App"},o,!1,function(e){s("gFwb")},null,null).exports,l=s("IHPB"),c=s.n(l),u=s("rVsN"),p=s.n(u),d=s("84iU"),m=s.n(d),v=(s("Sx4N"),s("TcQY")),h=s.n(v),f=void 0,g=m.a.create({headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:"2000",withCredentials:!0});g.interceptors.request.use(function(e){return f=v.Loading.service({text:"加载中...",background:"rgba(0,0,0,.3)"}),e},function(e){return f.close(),Object(v.Message)({message:"网络异常",type:"warning"}),p.a.reject(e)}),g.interceptors.response.use(function(e){f.close();var t=e.data;return 200==t.code?t:302==t.code?(Object(v.Message)({message:"账号已掉线，请重新登录",type:"warning"}),p.a.reject(e)):403==t.code?(Object(v.Message)({message:t.message,type:"warning"}),p.a.reject(e)):void 0},function(e){return console.log(e),f.close(),Object(v.Message)({message:"系统维护中",type:"warning"}),p.a.reject(e)});var _={post:function(e,t){return g.post(e,t).then(function(e){return e})},delete:function(e,t){return g.delete(e,{params:t}).then(function(e){return e})},put:function(e,t){return g.put(e,t).then(function(e){return e})},get:function(e,t){return g.get(e,{params:t}).then(function(e){return e})}};window.instanceAxios=g;var b=_,D="localhost:84",x={getLogs:D+"/logs/doFindPageObjects",deleteLogs:D+"/logs/deleteObjects",getMenus:D+"/menus/doFindObjects",deleteMenu:D+"/menus/doDeleteObject",postMenu:D+"/menus/doInsertObject",putMenu:D+"/menus/doUpdateObject",getDepts:D+"/depts/doFindObjects",postDept:D+"/depts/doInsertObject",putDept:D+"/depts/doUpdateObject",deleteDept:D+"/depts/doDeleteObject",getRoles:D+"/roles/doFindPageObjects",getRolesCheckBox:D+"/roles/doGetRolesCheckBox",deleteRole:D+"/roles/doDeleteObject",postRole:D+"/roles/doInsertObject",putRole:D+"/roles/doUpdateObject",selectMenusIdsByRoleId:D+"/roles/selectMenusIdsByRoleId",selectRolesMenusByRoleId:D+"/roles/doFindRolesMenusByRolesId",getUsers:D+"/users/doFindPageUsers",getUserDeptRolesByUserId:D+"/users/doGetUserDeptRolesByUserId",getUserUserRoleIdsByUserId:D+"/users/doGetUserDeptRoleIdsByUserId",postUser:D+"/users/doInsertUser",updateValidByUserId:D+"/users/updateValidByUserId",updateUserDeptRoleIdsById:D+"/users/updateUserDeptRoleIdsById"},w=s("5inH"),k=s("lC5x"),I=s.n(k),y=s("J0Oq"),M=s.n(y),C=(s("KPSb"),{data:function(){return{name:"",password:""}},methods:{login:function(){var e=this;return M()(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.push({path:"/main"});case 1:case"end":return t.stop()}},t,e)}))()}}}),F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_wrap"},[s("div",{staticClass:"pop"},[s("p",[e._v("后台管理系统")]),e._v(" "),s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("el-button",{on:{click:e.login}},[e._v("登录")])],1)])},staticRenderFns:[]};var $=s("C7Lr")(C,F,!1,function(e){s("sMtL")},"data-v-4e627f24",null).exports,P={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("not found-404")])},staticRenderFns:[]};var N=s("C7Lr")({data:function(){return{}}},P,!1,function(e){s("pZXu")},"data-v-5882d08a",null).exports,L={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"enterpriseMain flex fd-c"},[e._m(0),e._v(" "),s("div",{staticClass:"bottom f-a flex"},[s("div",{staticClass:"leftSide f-n"},e._l(e.leftSideBarData,function(t){return s("div",{key:t.name,staticClass:"firstLevel"},[e._v("\n        "+e._s(t.name)+"\n        "),s("ul",e._l(t.second,function(t){return s("router-link",{key:t.name,attrs:{"active-class":"active",to:{name:t.url},tag:"li"}},[e._v(e._s(t.name))])}),1)])}),0),e._v(" "),s("div",{staticClass:"right f-a"},[s("router-view",{staticClass:"view"})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top f-n flex jc-sb ai-c"},[t("div",{staticClass:"left"},[this._v("后台管理系统")]),this._v(" "),t("div",{staticClass:"right"},[this._v("2")])])}]};var U=s("C7Lr")({data:function(){return{leftSideBarData:[{name:"产品管理",url:"productManage",second:[{name:"a",url:"a"}]},{name:"系统管理",url:"sysManage",second:[{name:"部门管理",url:"deptManage"},{name:"菜单管理",url:"menuManage"},{name:"角色管理",url:"roleManage"},{name:"用户管理",url:"userManage"},{name:"日志管理",url:"logsManage"},{name:"修改密码",url:"editPassword"}]}]}},methods:{},components:{}},L,!1,function(e){s("d2U3")},"data-v-39920285",null).exports,R={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("a")])},staticRenderFns:[]};var V=[{path:"productManage",redirect:"productManage/a"},{path:"productManage/a",name:"a",component:s("C7Lr")({data:function(){return{}},components:{}},R,!1,function(e){s("LC6X")},"data-v-02db7728",null).exports}],A=s("3cXf"),S=s.n(A),j=s("aA9S"),O=s.n(j),B={data:function(){return{deptsData:[],deptId:"",postDeptDialogVisible:!1,deptForm:{name:"",note:null,sort:null,parentId:null},formLabelWidth:"100px",chooseParentDeptDialogVisible:!1,chooseParentDeptIndex:null,parentDeptName:"",chooseDeptItemData:null,isPost:!0}},mounted:function(){this.getDepts(),this.chooseParentDept()},computed:{},components:{},methods:{putDeptsAction:function(){var e=this.deptForm,t=this.chooseDeptItemData;null!==t&&(this.postDeptDialogVisible=!0,a()(e).forEach(function(s){e[s]=t[s]}),this.parentDeptName=t.parentName)},postDept:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postDept,t.deptForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getDepts(),t.postDeptDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putDept:function(e){var t=this;return M()(I.a.mark(function s(){var n,a;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=O()({id:t.chooseDeptItemData.id},t.deptForm),console.log(n),s.next=4,t.$http.put(t.$urls.putDept,n);case 4:a=s.sent,Object(v.Message)({message:a.message,type:"success"}),t.getDepts(),t.postDeptDialogVisible=!1,e();case 9:case"end":return s.stop()}},s,t)}))()},submitParentDept:function(){var e=this.deptsData[this.chooseParentDeptIndex];this.chooseParentDeptDialogVisible=!1,e&&(this.deptForm.parentId=e.id,this.parentDeptName=e.name)},submitDeptInfo:function(e){var t=this;this.isPost?this.postDept(function(){t.$refs[e].resetFields(),t.parentDeptName=""}):this.putDept(function(){t.$refs[e].resetFields(),t.parentDeptName=""})},chooseParentDeptAction:function(e){this.chooseParentDeptIndex=e},chooseParentDept:function(){var e=this,t=document.querySelector(".deptForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseParentDeptDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseParentDeptDialogVisible=!0)})},postDeptAction:function(){this.postDeptDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.deptsData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleDeptsData:function(){var e=JSON.parse(S()(this.deptsData));console.log(e),e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortDeptsData(e)},sortDeptsData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleDeptsData(e,t,0)},recycleHandleDeptsData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var a=t[n];if(a.level===s)for(var r=e.length-1;r>-1;r--){var o=e[r];a.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(r,1))}}e.length&&(s++,this.recycleHandleDeptsData(e,t,s)),this.deptsData=t},getDepts:function(){var e=this;return M()(I.a.mark(function t(){var s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getDepts);case 2:s=t.sent,console.log(s),e.deptsData=s.data,e.handleDeptsData();case 6:case"end":return t.stop()}},t,e)}))()},deleteDept:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteDept,{id:e});case 4:n=s.sent,console.log(n),Object(v.Message)({message:n.message,type:"success"}),t.getDepts();case 8:case"end":return s.stop()}},s,t)}))()},deleteDeptAction:function(){this.deleteDept(this.deptId)}}},E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"deptsPage"},[s("el-dialog",{staticClass:"chooseParentDeptForm",attrs:{title:"选择上级部门",visible:e.chooseParentDeptDialogVisible},on:{"update:visible":function(t){e.chooseParentDeptDialogVisible=t}}},[s("ul",e._l(e.deptsData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptsData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"parentDeptName",class:{chooseIndex:n===e.chooseParentDeptIndex},on:{click:function(t){return e.chooseParentDeptAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseParentDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitParentDept()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"deptForm",attrs:{title:e.isPost?"添加部门信息":"修改部门信息",visible:e.postDeptDialogVisible},on:{"update:visible":function(t){e.postDeptDialogVisible=t}}},[s("el-form",{ref:"deptForm",attrs:{model:e.deptForm}},[s("el-form-item",{attrs:{label:"部门名称：","label-width":e.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.deptForm.name,callback:function(t){e.$set(e.deptForm,"name",t)},expression:"deptForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级部门：","label-width":e.formLabelWidth,prop:"parentId"}},[s("el-input",{staticClass:"chooseParentDeptDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.parentDeptName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"排序号：","label-width":e.formLabelWidth,prop:"sort"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"排序号"},model:{value:e.deptForm.sort,callback:function(t){e.$set(e.deptForm,"sort",e._n(t))},expression:"deptForm.sort"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注：","label-width":e.formLabelWidth,prop:"note"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"备注"},model:{value:e.deptForm.note,callback:function(t){e.$set(e.deptForm,"note",t)},expression:"deptForm.note"}})],1),e._v(" "),s("el-form-item",{staticClass:"postDeptFormBtns"},[s("el-button",{on:{click:function(t){e.postDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDeptInfo("deptForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("部门管理")]),e._v(" "),s("div",{staticClass:"right"},[s("span",{on:{click:function(t){return e.deleteDeptAction()}}},[e._v("删除")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postDeptAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putDeptsAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.deptsData,function(t,n){return s("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.deptId,expression:"deptId"}],attrs:{type:"radio",name:"id"},domProps:{value:t.id,checked:e._q(e.deptId,t.id)},on:{click:function(s){e.chooseDeptItemData=t},change:function(s){e.deptId=t.id}}})]),e._v(" "),s("td",[e._v(e._s(t.id))]),e._v(" "),s("td",{style:{paddingLeft:20*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptsData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v("\n                        "+e._s(t.name)+"\n                    ")]),e._v(" "),s("td",[e._v(e._s(t.parentName))]),e._v(" "),s("td",[e._v(e._s(t.sort))])])}),0)])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("部门id")]),e._v(" "),s("th",[e._v("部门名称")]),e._v(" "),s("th",[e._v("上级部门")]),e._v(" "),s("th",[e._v("排序号")])])])}]};var T=s("C7Lr")(B,E,!1,function(e){s("ACW1"),s("yIaq")},"data-v-1aba607a",null).exports,W={data:function(){return{menusData:[],menuId:"",postMenuDialogVisible:!1,menuForm:{name:"",url:"",type:null,sort:null,permission:"",parentId:null},formLabelWidth:"100px",chooseParentMenuDialogVisible:!1,chooseParentMenuIndex:null,parentMenuName:"",chooseMenuItemData:null,isPost:!0}},mounted:function(){this.getMenus(),this.chooseParentMenu()},computed:{},components:{},methods:{putMenusAction:function(){var e=this.menuForm,t=this.chooseMenuItemData;null!==t&&(this.postMenuDialogVisible=!0,a()(e).forEach(function(s){e[s]=t[s]}),this.parentMenuName=t.parentName)},postMenu:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postMenu,t.menuForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getMenus(),t.postMenuDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putMenu:function(e){var t=this;return M()(I.a.mark(function s(){var n,a;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=O()({id:t.chooseMenuItemData.id},t.menuForm),console.log(n),s.next=4,t.$http.put(t.$urls.putMenu,n);case 4:a=s.sent,Object(v.Message)({message:a.message,type:"success"}),t.getMenus(),t.postMenuDialogVisible=!1,e();case 9:case"end":return s.stop()}},s,t)}))()},submitParentMenu:function(){var e=this.menusData[this.chooseParentMenuIndex];this.chooseParentMenuDialogVisible=!1,e&&(this.menuForm.parentId=e.id,this.parentMenuName=e.name)},submitMenuInfo:function(e){var t=this;this.isPost?this.postMenu(function(){t.$refs[e].resetFields(),t.parentMenuName=""}):this.putMenu(function(){t.$refs[e].resetFields(),t.parentMenuName=""})},chooseParentMenuAction:function(e){this.chooseParentMenuIndex=e},chooseParentMenu:function(){var e=this,t=document.querySelector(".menuForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseParentMenuDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseParentMenuDialogVisible=!0)})},postMenuAction:function(){this.postMenuDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.menusData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleMenusData:function(){var e=JSON.parse(S()(this.menusData));e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortMenusData(e)},sortMenusData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleMenusData(e,t,0)},recycleHandleMenusData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var a=t[n];if(a.level===s)for(var r=e.length-1;r>-1;r--){var o=e[r];a.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(r,1))}}e.length&&(s++,this.recycleHandleMenusData(e,t,s)),this.menusData=t},getMenus:function(){var e=this;return M()(I.a.mark(function t(){var s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getMenus);case 2:s=t.sent,e.menusData=s.data,e.handleMenusData();case 5:case"end":return t.stop()}},t,e)}))()},deleteMenu:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteMenu,{id:e});case 4:n=s.sent,console.log(n),Object(v.Message)({message:n.message,type:"success"}),t.getMenus();case 8:case"end":return s.stop()}},s,t)}))()},deleteMenuAction:function(){this.deleteMenu(this.menuId)}}},H={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menusPage"},[s("el-dialog",{staticClass:"chooseParentMenuForm",attrs:{title:"选择上级菜单",visible:e.chooseParentMenuDialogVisible},on:{"update:visible":function(t){e.chooseParentMenuDialogVisible=t}}},[s("ul",e._l(e.menusData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"parentMenuName",class:{chooseIndex:n===e.chooseParentMenuIndex},on:{click:function(t){return e.chooseParentMenuAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseParentMenuDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitParentMenu()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"menuForm",attrs:{title:e.isPost?"添加菜单信息":"修改菜单信息",visible:e.postMenuDialogVisible},on:{"update:visible":function(t){e.postMenuDialogVisible=t}}},[s("el-form",{ref:"menuForm",attrs:{model:e.menuForm}},[s("el-form-item",{attrs:{label:"类型：","label-width":e.formLabelWidth,prop:"type"}},[s("el-radio",{attrs:{label:1},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",e._n(t))},expression:"menuForm.type"}},[e._v("菜单")]),e._v(" "),s("el-radio",{attrs:{label:2},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",e._n(t))},expression:"menuForm.type"}},[e._v("按钮")])],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单名称：","label-width":e.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级菜单：","label-width":e.formLabelWidth,prop:"parentId"}},[s("el-input",{staticClass:"chooseParentMenuDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.parentMenuName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单URL：","label-width":e.formLabelWidth,prop:"url"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"url"},model:{value:e.menuForm.url,callback:function(t){e.$set(e.menuForm,"url",t)},expression:"menuForm.url"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"授权标识：","label-width":e.formLabelWidth,prop:"permission"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"多个用逗号分隔，如：user:list,user:create"},model:{value:e.menuForm.permission,callback:function(t){e.$set(e.menuForm,"permission",t)},expression:"menuForm.permission"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"排序号：","label-width":e.formLabelWidth,prop:"sort"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"排序号"},model:{value:e.menuForm.sort,callback:function(t){e.$set(e.menuForm,"sort",t)},expression:"menuForm.sort"}})],1),e._v(" "),s("el-form-item",{staticClass:"postMenuFormBtns"},[s("el-button",{on:{click:function(t){e.postMenuDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitMenuInfo("menuForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("菜单管理")]),e._v(" "),s("div",{staticClass:"right"},[s("span",{on:{click:function(t){return e.deleteMenuAction()}}},[e._v("删除")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postMenuAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putMenusAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.menusData,function(t,n){return s("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.menuId,expression:"menuId"}],attrs:{type:"radio",name:"id"},domProps:{value:t.id,checked:e._q(e.menuId,t.id)},on:{click:function(s){e.chooseMenuItemData=t},change:function(s){e.menuId=t.id}}})]),e._v(" "),s("td",{style:{paddingLeft:20*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v("\n                        "+e._s(t.id)+"\n                    ")]),e._v(" "),s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.parentName))]),e._v(" "),s("td",[e._v(e._s(1===t.type?"菜单":"按钮"))]),e._v(" "),s("td",[e._v(e._s(t.sort))]),e._v(" "),s("td",[e._v(e._s(t.url))]),e._v(" "),s("td",[e._v(e._s(t.permission))])])}),0)])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("菜单id")]),e._v(" "),s("th",[e._v("菜单名称")]),e._v(" "),s("th",[e._v("上级菜单")]),e._v(" "),s("th",[e._v("类型")]),e._v(" "),s("th",[e._v("排序号")]),e._v(" "),s("th",[e._v("菜单url")]),e._v(" "),s("th",[e._v("授权标识")])])])}]};var q=s("C7Lr")(W,H,!1,function(e){s("89bJ"),s("9uLG")},"data-v-cb69990e",null).exports,J=s("zsLt"),z=s.n(J),Z={data:function(){return{username:"",pageCurrent:1,rolesData:{},menusData:[],roleDialogVisible:!1,formLabelWidth:"100px",isPost:!0,roleForm:{roles:{name:"",note:"",id:null},menusIds:[]}}},mounted:function(){this.getRoles(this.username,this.pageCurrent),this.getMenus(),this.getRolesMenus(52)},components:{},methods:{updateRoleAction:function(e){console.log(e),this.roleForm.roles.name=e.name,this.roleForm.roles.note=e.note,this.roleForm.roles.id=e.id,this.selectMenusIdsByRoleId(e.id),this.roleDialogVisible=!0},selectMenusIdsByRoleId:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.get(t.$urls.selectMenusIdsByRoleId,{rolesId:e});case 2:n=s.sent,t.roleForm.menusIds=n.data;case 4:case"end":return s.stop()}},s,t)}))()},deleteRole:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteRole,{id:e});case 4:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent);case 7:case"end":return s.stop()}},s,t)}))()},deleteRoleAction:function(e){this.deleteRole(e)},changeMenu:function(e,t,s){var n=this,a=JSON.parse(S()(this.roleForm.menusIds));if(s.target.checked){a.push(this.menusData[0].id);for(var r=e.parentId;t>1;){var o=this.menusData[t-1];o.id===r&&(a.push(o.id),r=o.parentId),t--}a=[].concat(c()(new z.a(a)))}else if(e.hasNode)for(var i=[e.id],l=function(){var e=n.menusData[t+1];if(i.findIndex(function(t){return t===e.parentId})>-1){var s=a.findIndex(function(t){return t===e.id});s>-1&&a.splice(s,1),e.hasNode&&i.push(e.id)}t++};t<this.menusData.length-1;)l();this.roleForm.menusIds=a},submitRoleInfo:function(e){var t=this;this.isPost?this.postRole(function(){t.$refs[e].resetFields()}):this.putRole(function(){t.$refs[e].resetFields()})},postRole:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postRole,t.roleForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent),t.roleDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putRole:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.put(t.$urls.putRole,t.roleForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent),t.roleDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},postRoleAction:function(){this.roleDialogVisible=!0},getRoles:function(e,t){var s=this;return M()(I.a.mark(function n(){var a;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getRoles,{name:e,pageCurrent:t});case 2:a=n.sent,console.log(a),s.rolesData=a.data,s.pageCurrent=s.rolesData.pageCurrent;case 6:case"end":return n.stop()}},n,s)}))()},lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getRoles(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.rolesData.pageCount&&(this.pageCurrent++,this.getRoles(this.username,this.pageCurrent))},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.menusData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleMenusData:function(){var e=JSON.parse(S()(this.menusData));e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortMenusData(e)},sortMenusData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleMenusData(e,t,0)},recycleHandleMenusData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var a=t[n];if(a.level===s)for(var r=e.length-1;r>-1;r--){var o=e[r];a.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(r,1))}}e.length&&(s++,this.recycleHandleMenusData(e,t,s)),this.menusData=t},getMenus:function(){var e=this;return M()(I.a.mark(function t(){var s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getMenus);case 2:s=t.sent,e.menusData=s.data,e.handleMenusData();case 5:case"end":return t.stop()}},t,e)}))()},getRolesMenus:function(e){var t=this;return M()(I.a.mark(function s(){return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.get(t.$urls.selectRolesMenusByRoleId,{id:e});case 2:s.sent;case 3:case"end":return s.stop()}},s,t)}))()}}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rolesPage"},[s("el-dialog",{staticClass:"roleForm",attrs:{title:e.isPost?"添加角色信息":"修改角色信息",visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[s("el-form",{ref:"roleForm",attrs:{model:e.roleForm}},[s("el-form-item",{attrs:{label:"角色名称：","label-width":e.formLabelWidth,prop:".roles.name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.roleForm.roles.name,callback:function(t){e.$set(e.roleForm.roles,"name",t)},expression:"roleForm.roles.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色描述：","label-width":e.formLabelWidth,prop:".roles.note"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"描述"},model:{value:e.roleForm.roles.note,callback:function(t){e.$set(e.roleForm.roles,"note",t)},expression:"roleForm.roles.note"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色授权：","label-width":e.formLabelWidth,prop:"menusIds"}},[s("ul",e._l(e.menusData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.roleForm.menusIds,expression:"roleForm.menusIds"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.roleForm.menusIds)?e._i(e.roleForm.menusIds,t.id)>-1:e.roleForm.menusIds},on:{change:[function(s){var n=e.roleForm.menusIds,a=s.target,r=!!a.checked;if(Array.isArray(n)){var o=t.id,i=e._i(n,o);a.checked?i<0&&e.$set(e.roleForm,"menusIds",n.concat([o])):i>-1&&e.$set(e.roleForm,"menusIds",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.roleForm,"menusIds",r)},function(s){return e.changeMenu(t,n,s)}]}}),e._v(" "),s("span",[e._v(e._s(t.name))])])])}),0)]),e._v(" "),s("el-form-item",{staticClass:"postRoleFormBtns"},[s("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRoleInfo("roleForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("角色管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"角色名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getRoles(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postRoleAction()}}},[e._v("添加")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.rolesData.records,function(t,n){return s("tr",{key:t.id},[s("td",[e._v(e._s(n+1))]),e._v(" "),s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.note))]),e._v(" "),s("td",[e._v(e._s(t.createdTime))]),e._v(" "),s("td",[e._v(e._s(t.modifiedTime))]),e._v(" "),s("td",[e._v(e._s(t.createdUser))]),e._v(" "),s("td",[e._v(e._s(t.modifiedUser))]),e._v(" "),s("td",{staticClass:"tableListBtns"},[s("span",{on:{click:function(s){return e.deleteRoleAction(t.id)}}},[e._v("delete")]),e._v(" "),s("span",{on:{click:function(s){e.isPost=!1,e.updateRoleAction(t)}}},[e._v("update")])])])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getRoles(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getRoles(e.username,e.rolesData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.rolesData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.rolesData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.rolesData.pageCurrent)+"）")])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("序号")]),e._v(" "),s("th",[e._v("角色名称")]),e._v(" "),s("th",[e._v("备注")]),e._v(" "),s("th",[e._v("创建时间")]),e._v(" "),s("th",[e._v("修改时间")]),e._v(" "),s("th",[e._v("创建用户")]),e._v(" "),s("th",[e._v("修改用户")]),e._v(" "),s("th",[e._v("操作")])])])}]};var X={data:function(){return{usersData:{},username:"",pageCurrent:1,userId:null,postUserDialogVisible:!1,userForm:{id:null,username:"",password:"",deptId:null,email:"",mobile:"",roleIds:[]},formLabelWidth:"100px",chooseDeptDialogVisible:!1,deptName:"",chooseUserItemIndex:null,isPost:!0,checkBoxList:[],deptList:[],chooseDeptIndex:null}},mounted:function(){this.getUsers(this.username,this.pageCurrent),this.getRolesCheckBox(),this.getDepts(),this.chooseDept()},computed:{},components:{},methods:{lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getUsers(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.usersData.pageCount&&(this.pageCurrent++,this.getUsers(this.username,this.pageCurrent))},submitDept:function(){var e=this.deptList[this.chooseDeptIndex];this.chooseDeptDialogVisible=!1,e&&(this.userForm.deptId=e.id,this.deptName=e.name)},chooseDeptAction:function(e){this.chooseDeptIndex=e},chooseDept:function(){var e=this,t=document.querySelector(".userForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseDeptDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseDeptDialogVisible=!0)})},putUsersAction:function(){var e=this.userForm,t=this.usersData.records[this.chooseUserItemIndex];t&&(this.postUserDialogVisible=!0,a()(e).forEach(function(s){e[s]=t[s]}),this.deptName=t.depts&&t.depts.name)},postUser:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postUser,t.userForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent),t.postUserDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putUser:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.put(t.$urls.updateUserDeptRoleIdsById,t.userForm);case 2:n=s.sent,Object(v.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent),t.postUserDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},submitUserInfo:function(e){var t=this;console.log(this.userForm),this.isPost?this.postUser(function(){t.$refs[e].resetFields(),t.deptName=""}):this.putUser(function(){t.$refs[e].resetFields(),t.deptName=""})},postUserAction:function(){this.postUserDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.deptList.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleDeptsData:function(){var e=JSON.parse(S()(this.deptList));console.log(e),e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortDeptsData(e)},sortDeptsData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleDeptsData(e,t,0)},recycleHandleDeptsData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var a=t[n];if(a.level===s)for(var r=e.length-1;r>-1;r--){var o=e[r];a.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(r,1))}}e.length&&(s++,this.recycleHandleDeptsData(e,t,s)),this.deptList=t},getUserUserRolesByUserId:function(){var e=this;return M()(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getUserUserRolesByUserId,{userId:15});case 2:t.sent;case 3:case"end":return t.stop()}},t,e)}))()},editValid:function(e,t){var s=this;return M()(I.a.mark(function n(){var a;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=0===t?1:0,n.next=3,s.$http.put(s.$urls.updateValidByUserId,{id:e,valid:t,username:"admin"});case 3:a=n.sent,Object(v.Message)({message:a.message,type:"success"}),s.getUsers(s.username,s.pageCurrent);case 6:case"end":return n.stop()}},n,s)}))()},getUserUserRoleIdsByUserId:function(){var e=this;return M()(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getUserUserRoleIdsByUserId,{userId:15});case 2:t.sent;case 3:case"end":return t.stop()}},t,e)}))()},getRolesCheckBox:function(){var e=this;return M()(I.a.mark(function t(){var s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getRolesCheckBox);case 2:s=t.sent,e.checkBoxList=s.data;case 4:case"end":return t.stop()}},t,e)}))()},getDepts:function(){var e=this;return M()(I.a.mark(function t(){var s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getDepts);case 2:s=t.sent,console.log(s),e.deptList=s.data,e.handleDeptsData();case 6:case"end":return t.stop()}},t,e)}))()},getUsers:function(e,t){var s=this;return M()(I.a.mark(function n(){var a;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getUsers,{username:e,pageCurrent:t});case 2:a=n.sent,console.log(a),s.usersData=a.data,s.pageCurrent=s.usersData.pageCurrent;case 6:case"end":return n.stop()}},n,s)}))()},deleteUser:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteUser,{id:e});case 4:n=s.sent,console.log(n),Object(v.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent);case 8:case"end":return s.stop()}},s,t)}))()},deleteUserAction:function(){this.deleteUser(this.userId)}}},K={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"usersPage"},[s("el-dialog",{staticClass:"chooseDeptForm",attrs:{title:"选择上级部门",visible:e.chooseDeptDialogVisible},on:{"update:visible":function(t){e.chooseDeptDialogVisible=t}}},[s("ul",e._l(e.deptList,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptList[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"deptName",class:{chooseIndex:n===e.chooseDeptIndex},on:{click:function(t){return e.chooseDeptAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDept()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"userForm",attrs:{title:e.isPost?"添加用户信息":"修改用户信息",visible:e.postUserDialogVisible},on:{"update:visible":function(t){e.postUserDialogVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm}},[s("el-form-item",{attrs:{label:"用户名称：","label-width":e.formLabelWidth,prop:"username"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码：","label-width":e.formLabelWidth,prop:"password"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称",type:"password"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属部门：","label-width":e.formLabelWidth,prop:"deptId"}},[s("el-input",{staticClass:"chooseDeptDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.deptName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱：","label-width":e.formLabelWidth,prop:"email"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"邮箱"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号：","label-width":e.formLabelWidth,prop:"mobile"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"手机号"},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色：","label-width":e.formLabelWidth,prop:"roleIds"}},[s("el-checkbox-group",{model:{value:e.userForm.roleIds,callback:function(t){e.$set(e.userForm,"roleIds",t)},expression:"userForm.roleIds"}},e._l(e.checkBoxList,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),s("el-form-item",{staticClass:"postUserFormBtns"},[s("el-button",{on:{click:function(t){e.postUserDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitUserInfo("userForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("用户管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getUsers(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postUserAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putUsersAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.usersData.records,function(t,n){return s("tr",{key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],attrs:{type:"radio",id:t.id},domProps:{value:t.id,checked:e._q(e.userId,t.id)},on:{click:function(t){e.chooseUserItemIndex=n},change:function(s){e.userId=t.id}}})]),e._v(" "),s("td",[e._v(e._s(t.username))]),e._v(" "),s("td",[e._v(e._s(t.depts&&t.depts.name))]),e._v(" "),s("td",[e._v(e._s(t.email))]),e._v(" "),s("td",[e._v(e._s(t.mobile))]),e._v(" "),s("td",[e._v(e._s(1===t.valid?"启用":"禁用"))]),e._v(" "),s("td",[e._v(e._s(t.createdTime))]),e._v(" "),s("td",[e._v(e._s(t.modifiedTime))]),e._v(" "),s("td",[s("el-button",{on:{click:function(s){return e.editValid(t.id,t.valid)}}},[e._v(e._s(1===t.valid?"禁用":"启用"))])],1)])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getUsers(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getUsers(e.username,e.usersData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.usersData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.usersData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.usersData.pageCurrent)+"）")])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("id")]),e._v(" "),s("th",[e._v("用户名")]),e._v(" "),s("th",[e._v("部门")]),e._v(" "),s("th",[e._v("邮箱")]),e._v(" "),s("th",[e._v("手机号")]),e._v(" "),s("th",[e._v("状态")]),e._v(" "),s("th",[e._v("创建时间")]),e._v(" "),s("th",[e._v("修改时间")]),e._v(" "),s("th",[e._v("操作")])])])}]};var Q={data:function(){return{username:"",pageCurrent:1,logsData:{},idsCheckbox:[]}},mounted:function(){this.getLogs(this.username,this.pageCurrent)},components:{},methods:{getLogs:function(e,t){var s=this;return M()(I.a.mark(function n(){var a;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getLogs,{username:e,pageCurrent:t});case 2:a=n.sent,console.log(a),s.logsData=a.data,s.pageCurrent=s.logsData.pageCurrent;case 6:case"end":return n.stop()}},n,s)}))()},lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getLogs(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.logsData.pageCount&&(this.pageCurrent++,this.getLogs(this.username,this.pageCurrent))},deleteLogs:function(e){var t=this;return M()(I.a.mark(function s(){var n;return I.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteLogs,{ids:e.toString()});case 4:n=s.sent,console.log(n),Object(v.Message)({message:n.message,type:"success"}),t.getLogs(t.username,t.pageCurrent);case 8:case"end":return s.stop()}},s,t)}))()},deleteLogsAction:function(){this.deleteLogs(this.idsCheckbox)}}},Y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logsPage"},[s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("日志管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getLogs(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){return e.deleteLogsAction()}}},[e._v("删除")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.logsData.records,function(t){return s("tr",{key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.idsCheckbox,expression:"idsCheckbox"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(e.idsCheckbox)?e._i(e.idsCheckbox,t.id)>-1:e.idsCheckbox},on:{change:function(s){var n=e.idsCheckbox,a=s.target,r=!!a.checked;if(Array.isArray(n)){var o=t.id,i=e._i(n,o);a.checked?i<0&&(e.idsCheckbox=n.concat([o])):i>-1&&(e.idsCheckbox=n.slice(0,i).concat(n.slice(i+1)))}else e.idsCheckbox=r}}})]),e._v(" "),s("td",[e._v(e._s(t.username))]),e._v(" "),s("td",[e._v(e._s(t.operation))]),e._v(" "),s("td",[e._v(e._s(t.method))]),e._v(" "),s("td",[e._v(e._s(t.params))]),e._v(" "),s("td",[e._v(e._s(t.ip))]),e._v(" "),s("td",[e._v(e._s(t.operationTime))])])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getLogs(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getLogs(e.username,e.logsData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.logsData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.logsData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.logsData.pageCurrent)+"）")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("用户名")]),e._v(" "),s("th",[e._v("操作")]),e._v(" "),s("th",[e._v("请求方法")]),e._v(" "),s("th",[e._v("请求参数")]),e._v(" "),s("th",[e._v("ip")]),e._v(" "),s("th",[e._v("执行时长")])])])}]};var ee={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("editPassword")])},staticRenderFns:[]};var te=[{path:"sysManage",redirect:"sysManage/deptManage"},{path:"sysManage/deptManage",name:"deptManage",component:T},{path:"sysManage/menuManage",name:"menuManage",component:q},{path:"sysManage/roleManage",name:"roleManage",component:s("C7Lr")(Z,G,!1,function(e){s("ZDr9")},"data-v-10e9d532",null).exports},{path:"sysManage/userManage",name:"userManage",component:s("C7Lr")(X,K,!1,function(e){s("UBlm"),s("4Zm/")},"data-v-47a7b388",null).exports},{path:"sysManage/logsManage",name:"logsManage",component:s("C7Lr")(Q,Y,!1,function(e){s("BQno")},"data-v-06310306",null).exports},{path:"sysManage/editPassword",name:"editPassword",component:s("C7Lr")({data:function(){return{}},components:{}},ee,!1,function(e){s("TI0K")},"data-v-5ae56c6c",null).exports}];r.default.use(w.a);var se=new w.a({routes:[{path:"/",redirect:"/main"},{path:"/login",name:"login",component:$},{path:"/main",name:"name",component:U,redirect:"/main/sysManage",children:[].concat(c()(V),c()(te))},{path:"*",component:N}]}),ne=void 0;se.beforeEach(function(e,t,s){instanceAxios.defaults.headers.token?s():location.hash.lastIndexOf("?")>0?function(){if(location.hash.lastIndexOf("?")>0){location.hash.split("?")[1].split("&").forEach(function(e){e.indexOf("name")>-1&&(ne=e.split("=")[1])});var e=Date.now(),t=jsmd5("loginName="+ne+"&timestamp="+e+"&secret=123"),s=x.login+"?loginName="+ne+"&timestamp="+e+"&sign="+t;return b.post(s)}}().then(function(e){instanceAxios.defaults.headers.token=e.value,s(),localStorage.token=e.value}):(instanceAxios.defaults.headers.token=localStorage.token,s())});var ae=se,re=(s("09yM"),s("4YfN")),oe=s.n(re),ie=s("b8UZ"),le=s("AA3o"),ce=s.n(le),ue=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=x[e];return new function e(){ce()(this,e),this.namespaced=!0,this.state={list:[],nowPage:1,pages:1,size:10},this.getters={data:function(e,t){return e}},this.mutations={setList:function(e,t){e.pages=parseInt(t.count/e.size)+1,e.list=t.docs},pagesIncrease:function(e,t){e.nowPage++},listIncrease:function(e,t){var s;(s=e.list).push.apply(s,c()(t.docs))},pagesToOne:function(e,t){e.nowPage=1}},this.actions={getList:function(e){var s=this,n=e.state,a=e.commit,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M()(I.a.mark(function e(){var o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a("pagesToOne"),o={page:1,size:n.size},O()(o,r),e.next=5,b.get(t,o);case 5:return i=e.sent,a("setList",i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,s)}))()},listIncrease:function(e){var s=this,n=e.state,a=e.commit,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M()(I.a.mark(function e(){var o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.nowPage<n.pages)){e.next=11;break}return a("pagesIncrease"),o={page:n.nowPage,size:n.size},O()(o,r),e.next=6,b.get(t,o);case 6:return i=e.sent,a("listIncrease",i),e.abrupt("return",i);case 11:wx.showToast({title:"加载完成",icon:"success"});case 12:case"end":return e.stop()}},e,s)}))()}}}},pe={list:ue("list",{})},de={list:ue("list",{})},me={list:ue("list",{})},ve=oe()({},pe,de,me);r.default.use(ie.a);var he=new ie.a.Store({modules:oe()({},ve)}),fe=(new r.default,function(e){var t=e.toString();return t[1]?t:"0"+t}),ge={formatTime:function(e,t){var s="";if(e=e.toString())s=e.indexOf("+")>-1||e.indexOf("T")>-1?new Date(e):new Date(Number(e.replace(/\-/g,"/")));else{if(0!=e)return"";s=new Date}var n=s.getFullYear(),a=s.getMonth()+1,r=s.getDate(),o=s.getHours(),i=s.getMinutes(),l=s.getSeconds(),c=[n,a,r].map(fe).join("-"),u=[o,i,l].map(fe).join(":"),p=[o,i].map(fe).join(":");return void 0==t?c+" "+u:0==t?""+c:1==t?""+p:void 0}};r.default.use(h.a,{size:"small"}),r.default.prototype.$urls=x,r.default.prototype.$http=b,r.default.prototype.$event=new r.default,a()(ge).forEach(function(e){r.default.filter(e,ge[e])}),r.default.config.productionTip=!1,new r.default({el:"#app",router:ae,vuex:he,components:{App:i},template:"<App/>"})},TI0K:function(e,t){},UBlm:function(e,t){},ZDr9:function(e,t){},d2U3:function(e,t){},gFwb:function(e,t){},pZXu:function(e,t){},sMtL:function(e,t){},yIaq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.41b2bf9ef5aa3ef21354.js.map