webpackJsonp([1],{"1uMV":function(e,t){},"4eDH":function(e,t){},GygL:function(e,t){},HVdy:function(e,t){},HvDS:function(e,t){},Hy6Q:function(e,t){},KOzw:function(e,t){},LC6X:function(e,t){},MZaM:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("ZLEe"),r=s.n(n),a=s("kV13"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rootWrap",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=s("C7Lr")({name:"App"},o,!1,function(e){s("1uMV")},null,null).exports,l=s("IHPB"),u=s.n(l),c=s("84iU"),p=s.n(c),d=(s("Sx4N"),s("bQIR")),m=s.n(d),v=p.a.create({headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:"20000",withCredentials:!0}),h={post:function(e,t){return v.post(e,t).then(function(e){return e})},delete:function(e,t){return v.delete(e,{params:t}).then(function(e){return e})},put:function(e,t){return v.put(e,t).then(function(e){return e})},get:function(e,t){return v.get(e,{params:t}).then(function(e){return e})}},f="http://a.cloud.cn/api/",g={getLogs:f+"/logs/doFindPageObjects",deleteLogs:f+"/logs/deleteObjects",getMenus:f+"/menus/doFindObjects",deleteMenu:f+"/menus/doDeleteObject",postMenu:f+"/menus/doInsertObject",putMenu:f+"/menus/doUpdateObject",getDepts:f+"/depts/doFindObjects",postDept:f+"/depts/doInsertObject",putDept:f+"/depts/doUpdateObject",deleteDept:f+"/depts/doDeleteObject",getRoles:f+"/roles/doFindPageObjects",getRolesCheckBox:f+"/roles/doGetRolesCheckBox",deleteRole:f+"/roles/doDeleteObject",postRole:f+"/roles/doInsertObject",putRole:f+"/roles/doUpdateObject",selectMenusIdsByRoleId:f+"/roles/selectMenusIdsByRoleId",selectRolesMenusByRoleId:f+"/roles/doFindRolesMenusByRolesId",getUsers:f+"/users/doFindPageUsers",getUserDeptRolesByUserId:f+"/users/doGetUserDeptRolesByUserId",getUserUserRoleIdsByUserId:f+"/users/doGetUserDeptRoleIdsByUserId",postUser:f+"/users/doInsertUser",updateValidByUserId:f+"/users/updateValidByUserId",updateUserDeptRoleIdsById:f+"/users/updateUserDeptRoleIdsById",login:f+"/users/doLogin",logout:f+"/users/doLoginOut",editPassword:f+"/users/editPassword",getLoginUser:f+"/users/getLoginUser"},_=s("wUgx"),b=s("lC5x"),D=s.n(b),w=s("J0Oq"),x=s.n(w),k=(s("KPSb"),{data:function(){return{username:"admin",password:"1",isRemember:!0}},methods:{login:function(){var e=this;return x()(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.replace({name:"main"});case 1:case"end":return t.stop()}},t,e)}))()}}}),y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_wrap"},[s("div",{staticClass:"pop"},[s("p",[e._v("后台管理系统")]),e._v(" "),s("el-input",{attrs:{placeholder:"请输入账号",autocomplete:"on"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"on"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("el-checkbox",{model:{value:e.isRemember,callback:function(t){e.isRemember=t},expression:"isRemember"}},[e._v("记住账号密码")]),e._v(" "),s("el-button",{on:{click:function(t){return e.login()}}},[e._v("登录")])],1)])},staticRenderFns:[]};var I=s("C7Lr")(k,y,!1,function(e){s("GygL")},"data-v-14034723",null).exports,C={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("not found-404")])},staticRenderFns:[]};var F=s("C7Lr")({data:function(){return{}}},C,!1,function(e){s("pZXu")},"data-v-5882d08a",null).exports,M={data:function(){return{leftSideBarData:[{name:"产品管理",url:"productManage",second:[{name:"a",url:"a"}]},{name:"系统管理",url:"sysManage",second:[{name:"部门管理",url:"deptManage"},{name:"菜单管理",url:"menuManage"},{name:"角色管理",url:"roleManage"},{name:"用户管理",url:"userManage"},{name:"日志管理",url:"logsManage"},{name:"修改密码",url:"editPassword"}]}],userInfo:{}}},mounted:function(){this.getLoginUser()},methods:{doLogout:function(){this.logout()},logout:function(){var e=this;return x()(D.a.mark(function t(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:history.go(-1);case 1:case"end":return e.stop()}},t,e)}))()},getLoginUser:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getLoginUser);case 2:s=t.sent,e.userInfo=s.data;case 4:case"end":return t.stop()}},t,e)}))()}},components:{}},P={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"enterpriseMain flex fd-c"},[s("div",{staticClass:"top f-n flex jc-sb ai-c"},[s("div",{staticClass:"left"},[e._v("后台管理系统")]),e._v(" "),s("div",{staticClass:"right"},[s("span",{staticClass:"user"},[e._v(e._s(e.userInfo.username)+"，欢迎回来")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doLogout()}}},[e._v("退出登录")])],1)]),e._v(" "),s("div",{staticClass:"bottom f-a flex"},[s("div",{staticClass:"leftSide f-n"},e._l(e.leftSideBarData,function(t){return s("div",{key:t.name,staticClass:"firstLevel"},[e._v("\n        "+e._s(t.name)+"\n        "),s("ul",e._l(t.second,function(t){return s("router-link",{key:t.name,attrs:{"active-class":"active",to:{name:t.url},tag:"li"}},[e._v(e._s(t.name))])}),1)])}),0),e._v(" "),s("div",{staticClass:"right f-a"},[s("router-view",{staticClass:"view"})],1)])])},staticRenderFns:[]};var $=s("C7Lr")(M,P,!1,function(e){s("jQD1")},"data-v-18c990e3",null).exports,L={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("a")])},staticRenderFns:[]};var N=[{path:"productManage",redirect:"productManage/a"},{path:"productManage/a",name:"a",component:s("C7Lr")({data:function(){return{}},components:{}},L,!1,function(e){s("LC6X")},"data-v-02db7728",null).exports}],U=s("3cXf"),R=s.n(U),V=s("aA9S"),S=s.n(V),A={data:function(){return{deptsData:[],deptId:"",postDeptDialogVisible:!1,deptForm:{name:"",note:null,sort:null,parentId:null},formLabelWidth:"100px",chooseParentDeptDialogVisible:!1,chooseParentDeptIndex:null,parentDeptName:"",chooseDeptItemData:null,isPost:!0}},mounted:function(){this.getDepts(),this.chooseParentDept()},computed:{},components:{},methods:{putDeptsAction:function(){var e=this.deptForm,t=this.chooseDeptItemData;null!==t&&(this.postDeptDialogVisible=!0,r()(e).forEach(function(s){e[s]=t[s]}),this.parentDeptName=t.parentName)},postDept:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postDept,t.deptForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getDepts(),t.postDeptDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putDept:function(e){var t=this;return x()(D.a.mark(function s(){var n,r;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=S()({id:t.chooseDeptItemData.id},t.deptForm),console.log(n),s.next=4,t.$http.put(t.$urls.putDept,n);case 4:r=s.sent,Object(d.Message)({message:r.message,type:"success"}),t.getDepts(),t.postDeptDialogVisible=!1,e();case 9:case"end":return s.stop()}},s,t)}))()},submitParentDept:function(){var e=this.deptsData[this.chooseParentDeptIndex];this.chooseParentDeptDialogVisible=!1,e&&(this.deptForm.parentId=e.id,this.parentDeptName=e.name)},submitDeptInfo:function(e){var t=this;this.isPost?this.postDept(function(){t.$refs[e].resetFields(),t.parentDeptName=""}):this.putDept(function(){t.$refs[e].resetFields(),t.parentDeptName=""})},chooseParentDeptAction:function(e){this.chooseParentDeptIndex=e},chooseParentDept:function(){var e=this,t=document.querySelector(".deptForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseParentDeptDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseParentDeptDialogVisible=!0)})},postDeptAction:function(){this.postDeptDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.deptsData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleDeptsData:function(){var e=JSON.parse(R()(this.deptsData));console.log(e),e&&(e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortDeptsData(e))},sortDeptsData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleDeptsData(e,t,0)},recycleHandleDeptsData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var r=t[n];if(r.level===s)for(var a=e.length-1;a>-1;a--){var o=e[a];r.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(a,1))}}e.length&&(s++,this.recycleHandleDeptsData(e,t,s)),this.deptsData=t},getDepts:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getDepts);case 2:s=t.sent,console.log(s),e.deptsData=s.data,e.handleDeptsData();case 6:case"end":return t.stop()}},t,e)}))()},deleteDept:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteDept,{id:e});case 4:n=s.sent,console.log(n),Object(d.Message)({message:n.message,type:"success"}),t.getDepts();case 8:case"end":return s.stop()}},s,t)}))()},deleteDeptAction:function(){this.deleteDept(this.deptId)}}},O={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"deptsPage"},[s("el-dialog",{staticClass:"chooseParentDeptForm",attrs:{title:"选择上级部门",visible:e.chooseParentDeptDialogVisible},on:{"update:visible":function(t){e.chooseParentDeptDialogVisible=t}}},[s("ul",e._l(e.deptsData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptsData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"parentDeptName",class:{chooseIndex:n===e.chooseParentDeptIndex},on:{click:function(t){return e.chooseParentDeptAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseParentDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitParentDept()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"deptForm",attrs:{title:e.isPost?"添加部门信息":"修改部门信息",visible:e.postDeptDialogVisible},on:{"update:visible":function(t){e.postDeptDialogVisible=t}}},[s("el-form",{ref:"deptForm",attrs:{model:e.deptForm}},[s("el-form-item",{attrs:{label:"部门名称：","label-width":e.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.deptForm.name,callback:function(t){e.$set(e.deptForm,"name",t)},expression:"deptForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级部门：","label-width":e.formLabelWidth,prop:"parentId"}},[s("el-input",{staticClass:"chooseParentDeptDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.parentDeptName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"排序号：","label-width":e.formLabelWidth,prop:"sort"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"排序号"},model:{value:e.deptForm.sort,callback:function(t){e.$set(e.deptForm,"sort",e._n(t))},expression:"deptForm.sort"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注：","label-width":e.formLabelWidth,prop:"note"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"备注"},model:{value:e.deptForm.note,callback:function(t){e.$set(e.deptForm,"note",t)},expression:"deptForm.note"}})],1),e._v(" "),s("el-form-item",{staticClass:"postDeptFormBtns"},[s("el-button",{on:{click:function(t){e.postDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDeptInfo("deptForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("部门管理")]),e._v(" "),s("div",{staticClass:"right"},[s("span",{on:{click:function(t){return e.deleteDeptAction()}}},[e._v("删除")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postDeptAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putDeptsAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.deptsData,function(t,n){return s("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.deptId,expression:"deptId"}],attrs:{autocomplete:"on",type:"radio",name:"id"},domProps:{value:t.id,checked:e._q(e.deptId,t.id)},on:{click:function(s){e.chooseDeptItemData=t},change:function(s){e.deptId=t.id}}})]),e._v(" "),s("td",[e._v(e._s(t.id))]),e._v(" "),s("td",{style:{paddingLeft:20*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptsData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v("\n                        "+e._s(t.name)+"\n                    ")]),e._v(" "),s("td",[e._v(e._s(t.parentName))]),e._v(" "),s("td",[e._v(e._s(t.sort))])])}),0)])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("部门id")]),e._v(" "),s("th",[e._v("部门名称")]),e._v(" "),s("th",[e._v("上级部门")]),e._v(" "),s("th",[e._v("排序号")])])])}]};var j=s("C7Lr")(A,O,!1,function(e){s("Hy6Q"),s("HvDS")},"data-v-f5183f1c",null).exports,B={data:function(){return{menusData:[],menuId:"",postMenuDialogVisible:!1,menuForm:{name:"",url:"",type:null,sort:null,permission:"",parentId:null},formLabelWidth:"100px",chooseParentMenuDialogVisible:!1,chooseParentMenuIndex:null,parentMenuName:"",chooseMenuItemData:null,isPost:!0}},mounted:function(){this.getMenus(),this.chooseParentMenu()},computed:{},components:{},methods:{putMenusAction:function(){var e=this.menuForm,t=this.chooseMenuItemData;null!==t&&(this.postMenuDialogVisible=!0,r()(e).forEach(function(s){e[s]=t[s]}),this.parentMenuName=t.parentName)},postMenu:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postMenu,t.menuForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getMenus(),t.postMenuDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putMenu:function(e){var t=this;return x()(D.a.mark(function s(){var n,r;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=S()({id:t.chooseMenuItemData.id},t.menuForm),console.log(n),s.next=4,t.$http.put(t.$urls.putMenu,n);case 4:r=s.sent,Object(d.Message)({message:r.message,type:"success"}),t.getMenus(),t.postMenuDialogVisible=!1,e();case 9:case"end":return s.stop()}},s,t)}))()},submitParentMenu:function(){var e=this.menusData[this.chooseParentMenuIndex];this.chooseParentMenuDialogVisible=!1,e&&(this.menuForm.parentId=e.id,this.parentMenuName=e.name)},submitMenuInfo:function(e){var t=this;this.isPost?this.postMenu(function(){t.$refs[e].resetFields(),t.parentMenuName=""}):this.putMenu(function(){t.$refs[e].resetFields(),t.parentMenuName=""})},chooseParentMenuAction:function(e){this.chooseParentMenuIndex=e},chooseParentMenu:function(){var e=this,t=document.querySelector(".menuForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseParentMenuDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseParentMenuDialogVisible=!0)})},postMenuAction:function(){this.postMenuDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.menusData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleMenusData:function(){var e=JSON.parse(R()(this.menusData));e&&(e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortMenusData(e))},sortMenusData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleMenusData(e,t,0)},recycleHandleMenusData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var r=t[n];if(r.level===s)for(var a=e.length-1;a>-1;a--){var o=e[a];r.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(a,1))}}e.length&&(s++,this.recycleHandleMenusData(e,t,s)),this.menusData=t},getMenus:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getMenus);case 2:s=t.sent,e.menusData=s.data,e.handleMenusData();case 5:case"end":return t.stop()}},t,e)}))()},deleteMenu:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteMenu,{id:e});case 4:n=s.sent,console.log(n),Object(d.Message)({message:n.message,type:"success"}),t.getMenus();case 8:case"end":return s.stop()}},s,t)}))()},deleteMenuAction:function(){this.deleteMenu(this.menuId)}}},E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menusPage"},[s("el-dialog",{staticClass:"chooseParentMenuForm",attrs:{title:"选择上级菜单",visible:e.chooseParentMenuDialogVisible},on:{"update:visible":function(t){e.chooseParentMenuDialogVisible=t}}},[s("ul",e._l(e.menusData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"parentMenuName",class:{chooseIndex:n===e.chooseParentMenuIndex},on:{click:function(t){return e.chooseParentMenuAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseParentMenuDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitParentMenu()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"menuForm",attrs:{title:e.isPost?"添加菜单信息":"修改菜单信息",visible:e.postMenuDialogVisible},on:{"update:visible":function(t){e.postMenuDialogVisible=t}}},[s("el-form",{ref:"menuForm",attrs:{model:e.menuForm}},[s("el-form-item",{attrs:{label:"类型：","label-width":e.formLabelWidth,prop:"type"}},[s("el-radio",{attrs:{label:1},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",e._n(t))},expression:"menuForm.type"}},[e._v("菜单")]),e._v(" "),s("el-radio",{attrs:{label:2},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",e._n(t))},expression:"menuForm.type"}},[e._v("按钮")])],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单名称：","label-width":e.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级菜单：","label-width":e.formLabelWidth,prop:"parentId"}},[s("el-input",{staticClass:"chooseParentMenuDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.parentMenuName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单URL：","label-width":e.formLabelWidth,prop:"url"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"url"},model:{value:e.menuForm.url,callback:function(t){e.$set(e.menuForm,"url",t)},expression:"menuForm.url"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"授权标识：","label-width":e.formLabelWidth,prop:"permission"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"多个用逗号分隔，如：user:list,user:create"},model:{value:e.menuForm.permission,callback:function(t){e.$set(e.menuForm,"permission",t)},expression:"menuForm.permission"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"排序号：","label-width":e.formLabelWidth,prop:"sort"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"排序号"},model:{value:e.menuForm.sort,callback:function(t){e.$set(e.menuForm,"sort",t)},expression:"menuForm.sort"}})],1),e._v(" "),s("el-form-item",{staticClass:"postMenuFormBtns"},[s("el-button",{on:{click:function(t){e.postMenuDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitMenuInfo("menuForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("菜单管理")]),e._v(" "),s("div",{staticClass:"right"},[s("span",{on:{click:function(t){return e.deleteMenuAction()}}},[e._v("删除")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postMenuAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putMenusAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.menusData,function(t,n){return s("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.menuId,expression:"menuId"}],attrs:{autocomplete:"on",type:"radio",name:"id"},domProps:{value:t.id,checked:e._q(e.menuId,t.id)},on:{click:function(s){e.chooseMenuItemData=t},change:function(s){e.menuId=t.id}}})]),e._v(" "),s("td",{style:{paddingLeft:20*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v("\n                        "+e._s(t.id)+"\n                    ")]),e._v(" "),s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.parentName))]),e._v(" "),s("td",[e._v(e._s(1===t.type?"菜单":"按钮"))]),e._v(" "),s("td",[e._v(e._s(t.sort))]),e._v(" "),s("td",[e._v(e._s(t.url))]),e._v(" "),s("td",[e._v(e._s(t.permission))])])}),0)])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("菜单id")]),e._v(" "),s("th",[e._v("菜单名称")]),e._v(" "),s("th",[e._v("上级菜单")]),e._v(" "),s("th",[e._v("类型")]),e._v(" "),s("th",[e._v("排序号")]),e._v(" "),s("th",[e._v("菜单url")]),e._v(" "),s("th",[e._v("授权标识")])])])}]};var T=s("C7Lr")(B,E,!1,function(e){s("d1oO"),s("4eDH")},"data-v-02b1f382",null).exports,H=s("zsLt"),W=s.n(H),q={data:function(){return{username:"",pageCurrent:1,rolesData:{},menusData:[],roleDialogVisible:!1,formLabelWidth:"100px",isPost:!0,roleForm:{roles:{name:"",note:"",id:null},menusIds:[]}}},mounted:function(){this.getRoles(this.username,this.pageCurrent),this.getMenus(),this.getRolesMenus(52)},components:{},methods:{updateRoleAction:function(e){console.log(e),this.roleForm.roles.name=e.name,this.roleForm.roles.note=e.note,this.roleForm.roles.id=e.id,this.selectMenusIdsByRoleId(e.id),this.roleDialogVisible=!0},selectMenusIdsByRoleId:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.get(t.$urls.selectMenusIdsByRoleId,{rolesId:e});case 2:n=s.sent,t.roleForm.menusIds=n.data;case 4:case"end":return s.stop()}},s,t)}))()},deleteRole:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteRole,{id:e});case 4:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent);case 7:case"end":return s.stop()}},s,t)}))()},deleteRoleAction:function(e){this.deleteRole(e)},changeMenu:function(e,t,s){var n=this,r=JSON.parse(R()(this.roleForm.menusIds));if(s.target.checked){r.push(this.menusData[0].id);for(var a=e.parentId;t>1;){var o=this.menusData[t-1];o.id===a&&(r.push(o.id),a=o.parentId),t--}r=[].concat(u()(new W.a(r)))}else if(e.hasNode)for(var i=[e.id],l=function(){var e=n.menusData[t+1];if(i.findIndex(function(t){return t===e.parentId})>-1){var s=r.findIndex(function(t){return t===e.id});s>-1&&r.splice(s,1),e.hasNode&&i.push(e.id)}t++};t<this.menusData.length-1;)l();this.roleForm.menusIds=r},submitRoleInfo:function(e){var t=this;this.isPost?this.postRole(function(){t.$refs[e].resetFields()}):this.putRole(function(){t.$refs[e].resetFields()})},postRole:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postRole,t.roleForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent),t.roleDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putRole:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.put(t.$urls.putRole,t.roleForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getRoles(t.username,t.pageCurrent),t.roleDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},postRoleAction:function(){this.roleDialogVisible=!0},getRoles:function(e,t){var s=this;return x()(D.a.mark(function n(){var r;return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getRoles,{name:e,pageCurrent:t});case 2:if((r=n.sent).data){n.next=5;break}return n.abrupt("return");case 5:s.rolesData=r.data,s.pageCurrent=s.rolesData.pageCurrent;case 7:case"end":return n.stop()}},n,s)}))()},lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getRoles(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.rolesData.pageCount&&(this.pageCurrent++,this.getRoles(this.username,this.pageCurrent))},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.menusData.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleMenusData:function(){var e=JSON.parse(R()(this.menusData));e&&(e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortMenusData(e))},sortMenusData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleMenusData(e,t,0)},recycleHandleMenusData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var r=t[n];if(r.level===s)for(var a=e.length-1;a>-1;a--){var o=e[a];r.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(a,1))}}e.length&&(s++,this.recycleHandleMenusData(e,t,s)),this.menusData=t},getMenus:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getMenus);case 2:s=t.sent,e.menusData=s.data,e.handleMenusData();case 5:case"end":return t.stop()}},t,e)}))()},getRolesMenus:function(e){var t=this;return x()(D.a.mark(function s(){return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.get(t.$urls.selectRolesMenusByRoleId,{id:e});case 2:s.sent;case 3:case"end":return s.stop()}},s,t)}))()}}},z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rolesPage"},[s("el-dialog",{staticClass:"roleForm",attrs:{title:e.isPost?"添加角色信息":"修改角色信息",visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[s("el-form",{ref:"roleForm",attrs:{model:e.roleForm}},[s("el-form-item",{attrs:{label:"角色名称：","label-width":e.formLabelWidth,prop:".roles.name"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.roleForm.roles.name,callback:function(t){e.$set(e.roleForm.roles,"name",t)},expression:"roleForm.roles.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色描述：","label-width":e.formLabelWidth,prop:".roles.note"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"描述"},model:{value:e.roleForm.roles.note,callback:function(t){e.$set(e.roleForm.roles,"note",t)},expression:"roleForm.roles.note"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色授权：","label-width":e.formLabelWidth,prop:"menusIds"}},[s("ul",e._l(e.menusData,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.menusData[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.roleForm.menusIds,expression:"roleForm.menusIds"}],attrs:{autocomplete:"on",type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.roleForm.menusIds)?e._i(e.roleForm.menusIds,t.id)>-1:e.roleForm.menusIds},on:{change:[function(s){var n=e.roleForm.menusIds,r=s.target,a=!!r.checked;if(Array.isArray(n)){var o=t.id,i=e._i(n,o);r.checked?i<0&&e.$set(e.roleForm,"menusIds",n.concat([o])):i>-1&&e.$set(e.roleForm,"menusIds",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.roleForm,"menusIds",a)},function(s){return e.changeMenu(t,n,s)}]}}),e._v(" "),s("span",[e._v(e._s(t.name))])])])}),0)]),e._v(" "),s("el-form-item",{staticClass:"postRoleFormBtns"},[s("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRoleInfo("roleForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("角色管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{autocomplete:"on",type:"text",placeholder:"角色名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getRoles(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postRoleAction()}}},[e._v("添加")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.rolesData.records,function(t,n){return s("tr",{key:t.id},[s("td",[e._v(e._s(n+1))]),e._v(" "),s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",[e._v(e._s(t.note))]),e._v(" "),s("td",[e._v(e._s(t.createdTime))]),e._v(" "),s("td",[e._v(e._s(t.modifiedTime))]),e._v(" "),s("td",[e._v(e._s(t.createdUser))]),e._v(" "),s("td",[e._v(e._s(t.modifiedUser))]),e._v(" "),s("td",{staticClass:"tableListBtns"},[s("span",{on:{click:function(s){return e.deleteRoleAction(t.id)}}},[e._v("delete")]),e._v(" "),s("span",{on:{click:function(s){e.isPost=!1,e.updateRoleAction(t)}}},[e._v("update")])])])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getRoles(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getRoles(e.username,e.rolesData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.rolesData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.rolesData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.rolesData.pageCurrent)+"）")])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("序号")]),e._v(" "),s("th",[e._v("角色名称")]),e._v(" "),s("th",[e._v("备注")]),e._v(" "),s("th",[e._v("创建时间")]),e._v(" "),s("th",[e._v("修改时间")]),e._v(" "),s("th",[e._v("创建用户")]),e._v(" "),s("th",[e._v("修改用户")]),e._v(" "),s("th",[e._v("操作")])])])}]};var J={data:function(){return{usersData:{},username:"",pageCurrent:1,userId:null,postUserDialogVisible:!1,userForm:{id:null,username:"",password:"",deptId:null,email:"",mobile:"",roleIds:[]},formLabelWidth:"100px",chooseDeptDialogVisible:!1,deptName:"",chooseUserItemIndex:null,isPost:!0,checkBoxList:[],deptList:[],chooseDeptIndex:null}},mounted:function(){this.getUsers(this.username,this.pageCurrent),this.getRolesCheckBox(),this.getDepts(),this.chooseDept()},computed:{},components:{},methods:{lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getUsers(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.usersData.pageCount&&(this.pageCurrent++,this.getUsers(this.username,this.pageCurrent))},submitDept:function(){var e=this.deptList[this.chooseDeptIndex];this.chooseDeptDialogVisible=!1,e&&(this.userForm.deptId=e.id,this.deptName=e.name)},chooseDeptAction:function(e){this.chooseDeptIndex=e},chooseDept:function(){var e=this,t=document.querySelector(".userForm");t.addEventListener("click",function(s){for(var n=s.target||s.srcElement;"chooseDeptDom el-input el-input--small"!==n.className;){if(n===t){n=null;break}n=n.parentNode}n&&(e.chooseDeptDialogVisible=!0)})},putUsersAction:function(){var e=this.userForm,t=this.usersData.records[this.chooseUserItemIndex];t&&(this.postUserDialogVisible=!0,r()(e).forEach(function(s){e[s]=t[s]}),this.deptName=t.depts&&t.depts.name)},postUser:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.post(t.$urls.postUser,t.userForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent),t.postUserDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},putUser:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$http.put(t.$urls.updateUserDeptRoleIdsById,t.userForm);case 2:n=s.sent,Object(d.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent),t.postUserDialogVisible=!1,e();case 7:case"end":return s.stop()}},s,t)}))()},submitUserInfo:function(e){var t=this;console.log(this.userForm),this.isPost?this.postUser(function(){t.$refs[e].resetFields(),t.deptName=""}):this.putUser(function(){t.$refs[e].resetFields(),t.deptName=""})},postUserAction:function(){this.postUserDialogVisible=!0},recycleToggleNode:function(e,t){var s=this;e.hasNode&&this.deptList.forEach(function(n){n.parentId==e.id&&(n.isShow=!t,s.recycleToggleNode(n,t))})},handleDeptsData:function(){var e=JSON.parse(R()(this.deptList));console.log(e),e&&(e.forEach(function(t){e.forEach(function(e){e.parentId==t.id&&(t.hasNode=!0)}),t.parentId?t.isShow=!1:t.isShow=!0}),this.sortDeptsData(e))},sortDeptsData:function(e){for(var t=[],s=e.length-1;s>-1;s--){var n=e[s];n.parentId||(e.splice(s,1),n.level=0,t.unshift(n))}this.recycleHandleDeptsData(e,t,0)},recycleHandleDeptsData:function(e,t,s){for(var n=t.length-1;n>-1;n--){var r=t[n];if(r.level===s)for(var a=e.length-1;a>-1;a--){var o=e[a];r.id===o.parentId&&(o.level=s+1,t.splice(n+1,0,o),e.splice(a,1))}}e.length&&(s++,this.recycleHandleDeptsData(e,t,s)),this.deptList=t},getUserUserRolesByUserId:function(){var e=this;return x()(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getUserUserRolesByUserId,{userId:15});case 2:t.sent;case 3:case"end":return t.stop()}},t,e)}))()},editValid:function(e,t){var s=this;return x()(D.a.mark(function n(){var r;return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=0===t?1:0,n.next=3,s.$http.put(s.$urls.updateValidByUserId,{id:e,valid:t});case 3:r=n.sent,Object(d.Message)({message:r.message,type:"success"}),s.getUsers(s.username,s.pageCurrent);case 6:case"end":return n.stop()}},n,s)}))()},getUserUserRoleIdsByUserId:function(){var e=this;return x()(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getUserUserRoleIdsByUserId,{userId:15});case 2:t.sent;case 3:case"end":return t.stop()}},t,e)}))()},getRolesCheckBox:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getRolesCheckBox);case 2:s=t.sent,e.checkBoxList=s.data;case 4:case"end":return t.stop()}},t,e)}))()},getDepts:function(){var e=this;return x()(D.a.mark(function t(){var s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urls.getDepts);case 2:s=t.sent,console.log(s),e.deptList=s.data,e.handleDeptsData();case 6:case"end":return t.stop()}},t,e)}))()},getUsers:function(e,t){var s=this;return x()(D.a.mark(function n(){var r;return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getUsers,{username:e,pageCurrent:t});case 2:if(r=n.sent,console.log(r),r.data){n.next=6;break}return n.abrupt("return");case 6:s.usersData=r.data,s.pageCurrent=s.usersData.pageCurrent;case 8:case"end":return n.stop()}},n,s)}))()},deleteUser:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteUser,{id:e});case 4:n=s.sent,console.log(n),Object(d.Message)({message:n.message,type:"success"}),t.getUsers(t.username,t.pageCurrent);case 8:case"end":return s.stop()}},s,t)}))()},deleteUserAction:function(){this.deleteUser(this.userId)}}},X={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"usersPage"},[s("el-dialog",{staticClass:"chooseDeptForm",attrs:{title:"选择上级部门",visible:e.chooseDeptDialogVisible},on:{"update:visible":function(t){e.chooseDeptDialogVisible=t}}},[s("ul",e._l(e.deptList,function(t,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id},[s("div",{style:{paddingLeft:30*t.level+"px"}},[t.hasNode?s("span",{staticClass:"expand",on:{click:function(s){return e.recycleToggleNode(t,e.deptList[n+1].isShow)}}},[e._v(">>")]):e._e(),e._v(" "),s("span",{staticClass:"deptName",class:{chooseIndex:n===e.chooseDeptIndex},on:{click:function(t){return e.chooseDeptAction(n)}}},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("el-button",{on:{click:function(t){e.chooseDeptDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDept()}}},[e._v("确定")])],1),e._v(" "),s("el-dialog",{staticClass:"userForm",attrs:{title:e.isPost?"添加用户信息":"修改用户信息",visible:e.postUserDialogVisible},on:{"update:visible":function(t){e.postUserDialogVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm}},[s("el-form-item",{attrs:{label:"用户名称：","label-width":e.formLabelWidth,prop:"username"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码：","label-width":e.formLabelWidth,prop:"password"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"名称",type:"password"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属部门：","label-width":e.formLabelWidth,prop:"deptId"}},[s("el-input",{staticClass:"chooseDeptDom",attrs:{autocomplete:"on",placeholder:"请选择",readonly:"",value:e.deptName}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱：","label-width":e.formLabelWidth,prop:"email"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"邮箱"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号：","label-width":e.formLabelWidth,prop:"mobile"}},[s("el-input",{attrs:{autocomplete:"on",placeholder:"手机号"},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色：","label-width":e.formLabelWidth,prop:"roleIds"}},[s("el-checkbox-group",{model:{value:e.userForm.roleIds,callback:function(t){e.$set(e.userForm,"roleIds",t)},expression:"userForm.roleIds"}},e._l(e.checkBoxList,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),s("el-form-item",{staticClass:"postUserFormBtns"},[s("el-button",{on:{click:function(t){e.postUserDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitUserInfo("userForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("用户管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{autocomplete:"on",type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getUsers(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!0,e.postUserAction()}}},[e._v("添加")]),e._v(" "),s("span",{on:{click:function(t){e.isPost=!1,e.putUsersAction()}}},[e._v("修改")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.usersData.records,function(t,n){return s("tr",{key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],attrs:{autocomplete:"on",type:"radio",id:t.id},domProps:{value:t.id,checked:e._q(e.userId,t.id)},on:{click:function(t){e.chooseUserItemIndex=n},change:function(s){e.userId=t.id}}})]),e._v(" "),s("td",[e._v(e._s(t.username))]),e._v(" "),s("td",[e._v(e._s(t.depts&&t.depts.name))]),e._v(" "),s("td",[e._v(e._s(t.email))]),e._v(" "),s("td",[e._v(e._s(t.mobile))]),e._v(" "),s("td",[e._v(e._s(1===t.valid?"启用":"禁用"))]),e._v(" "),s("td",[e._v(e._s(t.createdTime))]),e._v(" "),s("td",[e._v(e._s(t.modifiedTime))]),e._v(" "),s("td",[s("el-button",{on:{click:function(s){return e.editValid(t.id,t.valid)}}},[e._v(e._s(1===t.valid?"禁用":"启用"))])],1)])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getUsers(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getUsers(e.username,e.usersData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.usersData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.usersData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.usersData.pageCurrent)+"）")])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("id")]),e._v(" "),s("th",[e._v("用户名")]),e._v(" "),s("th",[e._v("部门")]),e._v(" "),s("th",[e._v("邮箱")]),e._v(" "),s("th",[e._v("手机号")]),e._v(" "),s("th",[e._v("状态")]),e._v(" "),s("th",[e._v("创建时间")]),e._v(" "),s("th",[e._v("修改时间")]),e._v(" "),s("th",[e._v("操作")])])])}]};var G={data:function(){return{username:"",pageCurrent:1,logsData:{},idsCheckbox:[]}},mounted:function(){this.getLogs(this.username,this.pageCurrent),console.log(document.cookie)},components:{},methods:{getLogs:function(e,t){var s=this;return x()(D.a.mark(function n(){var r;return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.$http.get(s.$urls.getLogs,{username:e,pageCurrent:t});case 2:if(r=n.sent,console.log(r),r.data){n.next=6;break}return n.abrupt("return");case 6:s.logsData=r.data,s.pageCurrent=s.logsData.pageCurrent;case 8:case"end":return n.stop()}},n,s)}))()},lastPage:function(){this.pageCurrent>1&&(this.pageCurrent--,this.getLogs(this.username,this.pageCurrent))},nextPage:function(){this.pageCurrent<this.logsData.pageCount&&(this.pageCurrent++,this.getLogs(this.username,this.pageCurrent))},deleteLogs:function(e){var t=this;return x()(D.a.mark(function s(){var n;return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(confirm("确认删除吗?")){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,t.$http.delete(t.$urls.deleteLogs,{ids:e.toString()});case 4:n=s.sent,console.log(n),Object(d.Message)({message:n.message,type:"success"}),t.getLogs(t.username,t.pageCurrent);case 8:case"end":return s.stop()}},s,t)}))()},deleteLogsAction:function(){this.deleteLogs(this.idsCheckbox)}}},Q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logsPage"},[s("div",{staticClass:"head flex jc-sb"},[s("span",[e._v("日志管理")]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{autocomplete:"on",type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("span",{on:{click:function(t){return e.getLogs(e.username,1)}}},[e._v("搜索")]),e._v(" "),s("span",{on:{click:function(t){return e.deleteLogsAction()}}},[e._v("删除")])])]),e._v(" "),s("div",{staticClass:"table"},[s("table",[e._m(0),e._v(" "),s("tbody",e._l(e.logsData.records,function(t){return s("tr",{key:t.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.idsCheckbox,expression:"idsCheckbox"}],attrs:{autocomplete:"on",type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(e.idsCheckbox)?e._i(e.idsCheckbox,t.id)>-1:e.idsCheckbox},on:{change:function(s){var n=e.idsCheckbox,r=s.target,a=!!r.checked;if(Array.isArray(n)){var o=t.id,i=e._i(n,o);r.checked?i<0&&(e.idsCheckbox=n.concat([o])):i>-1&&(e.idsCheckbox=n.slice(0,i).concat(n.slice(i+1)))}else e.idsCheckbox=a}}})]),e._v(" "),s("td",[e._v(e._s(t.username))]),e._v(" "),s("td",[e._v(e._s(t.operation))]),e._v(" "),s("td",[e._v(e._s(t.method))]),e._v(" "),s("td",[e._v(e._s(t.params))]),e._v(" "),s("td",[e._v(e._s(t.ip))]),e._v(" "),s("td",[e._v(e._s(t.operationTime))])])}),0)])]),e._v(" "),s("div",{staticClass:"btns"},[s("span",{on:{click:function(t){return e.getLogs(e.username,1)}}},[e._v("首页")]),e._v(" "),s("span",{on:{click:function(t){return e.lastPage()}}},[e._v("上一页")]),e._v(" "),s("span",{on:{click:function(t){return e.nextPage()}}},[e._v("下一页")]),e._v(" "),s("span",{on:{click:function(t){return e.getLogs(e.username,e.logsData.pageCount)}}},[e._v("尾页")]),e._v(" "),s("span",[e._v("总记录数（"+e._s(e.logsData.rowCount)+"）")]),e._v(" "),s("span",[e._v("总页数（"+e._s(e.logsData.pageCount)+"）")]),e._v(" "),s("span",[e._v("当前页（"+e._s(e.logsData.pageCurrent)+"）")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("选择")]),e._v(" "),s("th",[e._v("用户名")]),e._v(" "),s("th",[e._v("操作")]),e._v(" "),s("th",[e._v("请求方法")]),e._v(" "),s("th",[e._v("请求参数")]),e._v(" "),s("th",[e._v("ip")]),e._v(" "),s("th",[e._v("执行时长")])])])}]};var Z={data:function(){return{editPasswordForm:{oldPassword:"",newPassword:"",newConfirm:""}}},methods:{editPassword:function(){var e=this;return x()(D.a.mark(function t(){var s,n,r;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.editPasswordForm.newPassword,n=e.editPasswordForm.newConfirm,s===n){t.next=5;break}return Object(d.Message)({message:"密码输入不一致",type:"warning"}),t.abrupt("return");case 5:return t.next=7,e.$http.put(e.$urls.editPassword,e.editPasswordForm);case 7:r=t.sent,Object(d.Message)({message:r.message+"，请重新登录",type:"success",duration:1e3,onClose:function(){var t=x()(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$urls.logout);case 2:case"end":return t.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}()});case 9:case"end":return t.stop()}},t,e)}))()}}},K={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_wrap"},[s("div",{staticClass:"pop"},[s("p",[e._v("修改密码")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.editPasswordForm,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"原密码"}},[s("el-input",{attrs:{type:"password",placeholder:"原密码",autocomplete:"on"},model:{value:e.editPasswordForm.oldPassword,callback:function(t){e.$set(e.editPasswordForm,"oldPassword",t)},expression:"editPasswordForm.oldPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码"}},[s("el-input",{attrs:{type:"password",placeholder:"新密码",autocomplete:"on"},model:{value:e.editPasswordForm.newPassword,callback:function(t){e.$set(e.editPasswordForm,"newPassword",t)},expression:"editPasswordForm.newPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码确认"}},[s("el-input",{attrs:{type:"password",placeholder:"密码确认",autocomplete:"on"},model:{value:e.editPasswordForm.newConfirm,callback:function(t){e.$set(e.editPasswordForm,"newConfirm",t)},expression:"editPasswordForm.newConfirm"}})],1),e._v(" "),s("el-form-item",[s("el-button",[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editPassword()}}},[e._v("确定")])],1)],1)],1)])},staticRenderFns:[]};var Y=[{path:"sysManage",redirect:"sysManage/deptManage"},{path:"sysManage/deptManage",name:"deptManage",component:j},{path:"sysManage/menuManage",name:"menuManage",component:T},{path:"sysManage/roleManage",name:"roleManage",component:s("C7Lr")(q,z,!1,function(e){s("KOzw")},"data-v-13a0ee2a",null).exports},{path:"sysManage/userManage",name:"userManage",component:s("C7Lr")(J,X,!1,function(e){s("tuaq"),s("HVdy")},"data-v-07be881e",null).exports},{path:"sysManage/logsManage",name:"logsManage",component:s("C7Lr")(G,Q,!1,function(e){s("MZaM")},"data-v-d8e116b6",null).exports},{path:"sysManage/editPassword",name:"editPassword",component:s("C7Lr")(Z,K,!1,function(e){s("rqIu")},"data-v-83685d18",null).exports}];a.default.use(_.a);var ee=new _.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:I},{path:"/main",name:"main",component:$,redirect:"/main/sysManage",children:[].concat(u()(N),u()(Y))},{path:"*",component:F}]}),te=(s("gFLX"),s("4YfN")),se=s.n(te),ne=s("fUgm"),re=s("AA3o"),ae=s.n(re),oe=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=g[e];return new function e(){ae()(this,e),this.namespaced=!0,this.state={list:[],nowPage:1,pages:1,size:10},this.getters={data:function(e,t){return e}},this.mutations={setList:function(e,t){e.pages=parseInt(t.count/e.size)+1,e.list=t.docs},pagesIncrease:function(e,t){e.nowPage++},listIncrease:function(e,t){var s;(s=e.list).push.apply(s,u()(t.docs))},pagesToOne:function(e,t){e.nowPage=1}},this.actions={getList:function(e){var s=this,n=e.state,r=e.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x()(D.a.mark(function e(){var o,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("pagesToOne"),o={page:1,size:n.size},S()(o,a),e.next=5,h.get(t,o);case 5:return i=e.sent,r("setList",i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,s)}))()},listIncrease:function(e){var s=this,n=e.state,r=e.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x()(D.a.mark(function e(){var o,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.nowPage<n.pages)){e.next=11;break}return r("pagesIncrease"),o={page:n.nowPage,size:n.size},S()(o,a),e.next=6,h.get(t,o);case 6:return i=e.sent,r("listIncrease",i),e.abrupt("return",i);case 11:wx.showToast({title:"加载完成",icon:"success"});case 12:case"end":return e.stop()}},e,s)}))()}}}},ie={list:oe("list",{})},le={list:oe("list",{})},ue={list:oe("list",{})},ce=se()({},ie,le,ue);a.default.use(ne.a);var pe=new ne.a.Store({modules:se()({},ce)}),de=(new a.default,function(e){var t=e.toString();return t[1]?t:"0"+t}),me={formatTime:function(e,t){var s="";if(e=e.toString())s=e.indexOf("+")>-1||e.indexOf("T")>-1?new Date(e):new Date(Number(e.replace(/\-/g,"/")));else{if(0!=e)return"";s=new Date}var n=s.getFullYear(),r=s.getMonth()+1,a=s.getDate(),o=s.getHours(),i=s.getMinutes(),l=s.getSeconds(),u=[n,r,a].map(de).join("-"),c=[o,i,l].map(de).join(":"),p=[o,i].map(de).join(":");return void 0==t?u+" "+c:0==t?""+u:1==t?""+p:void 0}};a.default.use(m.a,{size:"small"}),a.default.prototype.$urls=g,a.default.prototype.$http=h,a.default.prototype.$event=new a.default,r()(me).forEach(function(e){a.default.filter(e,me[e])}),window.openBackAudio=function(){console.log(1)},new a.default({el:"#app",router:ee,vuex:pe,components:{App:i},template:"<App/>"})},d1oO:function(e,t){},gFLX:function(e,t){},jQD1:function(e,t){},pZXu:function(e,t){},rqIu:function(e,t){},tuaq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8a060709dccf94e113f4.js.map